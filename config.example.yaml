location:
  latitude: 40.7128
  longitude: -74.006
  timezone: America/New_York
weather_api:
  enabled: true
  provider: open-meteo
  openweathermap:
    api_key: your_api_key_here
  open_meteo: null
  resilience:
    cache_file: state/weather_cache.json
    cache_valid_hours: 6.0
    forecast_horizon_hours: 12
    refresh_interval_minutes: 10
    retry_interval_minutes: 5
    max_retry_interval_minutes: 60
    outage_alert_after_minutes: 30
vacation_mode: false
devices:
  credentials:
    username: test@example.com
    password: test123
  groups:
    driveway_heating:
      enabled: true
      items:
      - name: Driveway Mat
        ip_address: 192.168.1.100
        outlets:
        - 0
        - 1
      schedules:
      - name: Morning Black Ice Protection
        enabled: true
        priority: critical
        days:
        - 1
        - 2
        - 3
        - 4
        - 5
        true:
          type: time
          value: 06:00
        false:
          type: sunrise
          offset: 30
          fallback: 08:00
        conditions:
          temperature_max: 32
        safety:
          max_runtime_hours: 3
          cooldown_minutes: 30
      - name: All Day Storm Protection
        enabled: true
        priority: critical
        days:
        - 1
        - 2
        - 3
        - 4
        - 5
        - 6
        - 7
        true:
          type: time
          value: 00:00
        false:
          type: time
          value: '23:59'
        conditions:
          temperature_max: 32
          precipitation_active: true
        safety:
          max_runtime_hours: 6
          cooldown_minutes: 30
    christmas_lights:
      enabled: true
      items:
      - name: Front Yard Lights
        ip_address: 192.168.1.110
        outlets:
        - 0
        - 1
      - name: Tree Lights
        ip_address: 192.168.1.111
      schedules:
      - name: Evening Display
        enabled: true
        priority: normal
        days:
        - 1
        - 2
        - 3
        - 4
        - 5
        - 6
        - 7
        true:
          type: sunset
          offset: -30
          fallback: '17:00'
        false:
          type: time
          value: 01:00
        safety:
          max_runtime_hours: 8
safety:
  max_runtime_hours: 6
  cooldown_minutes: 30
scheduler:
  check_interval_minutes: 10
  forecast_hours: 12
thresholds:
  # Temperature threshold for precipitation-based mat activation (°F)
  temperature_f: 34
  # Lead time before forecasted precipitation to turn on mats (minutes)
  lead_time_minutes: 60
  # Time to keep mats on after precipitation ends (minutes)
  trailing_time_minutes: 60
  # Black ice detection configuration
  black_ice_detection:
    # Enable or disable black ice detection
    enabled: true
    # Maximum temperature to consider black ice risk (°F)
    # Black ice typically forms when temp is at or below freezing
    temperature_max_f: 36
    # Maximum dew point spread for risk detection (°F)
    # When temp - dewpoint ≤ this value, moisture is near condensation
    dew_point_spread_f: 4
    # Minimum relative humidity to consider risk (%)
    # High humidity indicates moisture available for black ice formation
    humidity_min_percent: 80
logging:
  level: INFO
  max_file_size_mb: 10
  backup_count: 5
health_check:
  interval_hours: 24
  max_consecutive_failures: 3
reboot:
  pause_seconds: 60
health_server:
  enabled: false
  host: 0.0.0.0
  port: 4329
notifications:
  required: false
  test_on_startup: false
  check_interval_seconds: 60
  email:
    enabled: false
    smtp_host: smtp.gmail.com
    smtp_port: 587
    smtp_username: your_email@gmail.com
    smtp_password: your_app_password
    from_email: your_email@gmail.com
    to_emails:
    - recipient1@example.com
    - recipient2@example.com
    use_tls: true
  webhook:
    enabled: false
    url: https://your-webhook-url.com/notifications
  forecast:
    enabled: false
    notify_mode: always
    temp_change_threshold_f: 5.0
    precip_change_threshold_mm: 2.0
    state_file: state/forecast_notification_state.json
web:
  enabled: true
  bind_host: 127.0.0.1
  port: 4328
  auth:
    enabled: false
    username: admin
    password_hash: ''
