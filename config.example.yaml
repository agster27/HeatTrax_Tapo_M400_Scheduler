# HeatTrax Tapo M400 Scheduler Configuration
#
# All settings can be overridden using environment variables with the HEATTRAX_ prefix.
# Environment variables take precedence over values in this file.
# This is useful for Docker deployments and keeping secrets secure.

# Location settings for weather data
# Environment variables: HEATTRAX_LATITUDE, HEATTRAX_LONGITUDE, HEATTRAX_TIMEZONE
location:
  latitude: 40.7128          # ENV: HEATTRAX_LATITUDE
  longitude: -74.0060        # ENV: HEATTRAX_LONGITUDE
  timezone: "America/New_York"  # ENV: HEATTRAX_TIMEZONE

# Tapo device settings
# Environment variables: HEATTRAX_TAPO_IP_ADDRESS, HEATTRAX_TAPO_USERNAME, HEATTRAX_TAPO_PASSWORD
device:
  ip_address: "192.168.1.100"      # ENV: HEATTRAX_TAPO_IP_ADDRESS
  username: "your_tapo_username"   # ENV: HEATTRAX_TAPO_USERNAME
  password: "your_tapo_password"   # ENV: HEATTRAX_TAPO_PASSWORD

# Weather thresholds
# Environment variables: HEATTRAX_THRESHOLD_TEMP_F, HEATTRAX_LEAD_TIME_MINUTES, HEATTRAX_TRAILING_TIME_MINUTES
thresholds:
  # Temperature threshold in Fahrenheit
  temperature_f: 34              # ENV: HEATTRAX_THRESHOLD_TEMP_F
  # Minutes before precipitation to turn on
  lead_time_minutes: 60          # ENV: HEATTRAX_LEAD_TIME_MINUTES
  # Minutes after precipitation to turn off
  trailing_time_minutes: 60      # ENV: HEATTRAX_TRAILING_TIME_MINUTES

# Optional morning frost-clearing mode
# Environment variables: HEATTRAX_MORNING_MODE_ENABLED, HEATTRAX_MORNING_MODE_START_HOUR, HEATTRAX_MORNING_MODE_END_HOUR
morning_mode:
  enabled: true      # ENV: HEATTRAX_MORNING_MODE_ENABLED (true/false)
  start_hour: 6      # ENV: HEATTRAX_MORNING_MODE_START_HOUR (0-23)
  end_hour: 8        # ENV: HEATTRAX_MORNING_MODE_END_HOUR (0-23)

# Safety settings
# Environment variables: HEATTRAX_MAX_RUNTIME_HOURS, HEATTRAX_COOLDOWN_MINUTES
safety:
  # Maximum continuous runtime in hours
  max_runtime_hours: 6       # ENV: HEATTRAX_MAX_RUNTIME_HOURS
  # Cooldown period after max runtime in minutes
  cooldown_minutes: 30       # ENV: HEATTRAX_COOLDOWN_MINUTES

# Scheduler settings
# Environment variables: HEATTRAX_CHECK_INTERVAL_MINUTES, HEATTRAX_FORECAST_HOURS
scheduler:
  # How often to check weather in minutes
  check_interval_minutes: 10   # ENV: HEATTRAX_CHECK_INTERVAL_MINUTES
  # How far ahead to look for precipitation in hours
  forecast_hours: 12           # ENV: HEATTRAX_FORECAST_HOURS

# Logging settings
# Environment variable: HEATTRAX_LOG_LEVEL
logging:
  level: "INFO"  # DEBUG, INFO, WARNING, ERROR, CRITICAL - ENV: HEATTRAX_LOG_LEVEL
  max_file_size_mb: 10
  backup_count: 5

# Additional environment variables:
# - HEATTRAX_CONFIG_PATH: Path to this configuration file (default: config.yaml)
# - TZ: System timezone (e.g., America/New_York)
